{
  "keywords": {
    "coordinate_system": {
      "description": "Coordinate system type: 'cartesian' or 'polar'",
      "values": ["cartesian", "polar"],
      "example": "coordinate_system: polar"
    },
    "mesh": {
      "description": "Mesh configuration for Cartesian coordinates",
      "children": ["dx", "dy"]
    },
    "dx": {
      "description": "Grid spacing in x-direction [m]",
      "type": "number",
      "example": "dx: 0.2e-3"
    },
    "dy": {
      "description": "Grid spacing in y-direction [m]",
      "type": "number",
      "example": "dy: 0.2e-3"
    },
    "polar_domain": {
      "description": "Polar coordinate domain configuration",
      "children": ["r_start", "r_end", "r_orientation", "theta_range"]
    },
    "r_start": {
      "description": "Inner radius [m], must satisfy 0 < r_start < r_end",
      "type": "number",
      "example": "r_start: 0.222"
    },
    "r_end": {
      "description": "Outer radius [m]",
      "type": "number",
      "example": "r_end: 0.278"
    },
    "r_orientation": {
      "description": "Radial direction orientation: 'horizontal' or 'vertical'",
      "values": ["horizontal", "vertical"],
      "example": "r_orientation: horizontal"
    },
    "theta_range": {
      "description": "Angular range [rad], typically π/n for n-pole sector models",
      "type": "number",
      "example": "theta_range: 1.0471975512  # π/3 for 3-pole sector"
    },
    "polar_boundary_conditions": {
      "description": "Boundary conditions for polar coordinates",
      "children": ["inner", "outer"]
    },
    "inner": {
      "description": "Inner boundary condition (at r=r_start)",
      "children": ["type", "value"]
    },
    "outer": {
      "description": "Outer boundary condition (at r=r_end)",
      "children": ["type", "value"]
    },
    "type": {
      "description": "Boundary condition type: 'dirichlet', 'neumann', or 'periodic'",
      "values": ["dirichlet", "neumann", "periodic"],
      "example": "type: dirichlet"
    },
    "value": {
      "description": "Boundary condition value (for Dirichlet/Neumann)",
      "type": "number",
      "example": "value: 0.0"
    },
    "boundary_conditions": {
      "description": "Boundary conditions for Cartesian coordinates (4 edges)",
      "children": ["left", "right", "top", "bottom"]
    },
    "left": {
      "description": "Left boundary condition",
      "children": ["type", "value"]
    },
    "right": {
      "description": "Right boundary condition",
      "children": ["type", "value"]
    },
    "top": {
      "description": "Top boundary condition",
      "children": ["type", "value"]
    },
    "bottom": {
      "description": "Bottom boundary condition",
      "children": ["type", "value"]
    },
    "materials": {
      "description": "Material definitions (any material name is allowed)",
      "acceptsAnyChild": true,
      "childrenProperties": ["rgb", "mu_r", "jz", "calc_force"]
    },
    "rgb": {
      "description": "RGB color for material identification in input image [R, G, B]",
      "type": "array",
      "example": "rgb: [255, 255, 255]",
      "validParents": ["materials"]
    },
    "mu_r": {
      "description": "Relative permeability (dimensionless)",
      "type": "number",
      "example": "mu_r: 1.0",
      "validParents": ["materials"]
    },
    "jz": {
      "description": "Current density [A/m²], can be constant, formula, or array",
      "type": "number|string|array",
      "example": "jz: 1.0e9",
      "validParents": ["materials"]
    },
    "calc_force": {
      "description": "Calculate Maxwell stress force on this material (true/false)",
      "type": "boolean",
      "example": "calc_force: true",
      "validParents": ["materials"]
    },
    "transient": {
      "description": "Transient analysis configuration",
      "children": ["enabled", "enable_sliding", "total_steps", "slide_direction", "slide_region_start", "slide_region_end", "slide_pixels_per_step"]
    },
    "enabled": {
      "description": "Enable feature (true/false)",
      "type": "boolean",
      "example": "enabled: true",
      "validParents": ["transient", "nonlinear_solver"]
    },
    "enable_sliding": {
      "description": "Enable image sliding for rotor motion simulation (true/false)",
      "type": "boolean",
      "example": "enable_sliding: true"
    },
    "total_steps": {
      "description": "Number of analysis steps",
      "type": "integer",
      "example": "total_steps: 167"
    },
    "slide_direction": {
      "description": "Sliding direction: 'vertical' or 'horizontal'",
      "values": ["vertical", "horizontal"],
      "example": "slide_direction: vertical"
    },
    "slide_region_start": {
      "description": "Start position of sliding region [pixels]",
      "type": "integer",
      "example": "slide_region_start: 110"
    },
    "slide_region_end": {
      "description": "End position of sliding region [pixels]",
      "type": "integer",
      "example": "slide_region_end: 390"
    },
    "slide_pixels_per_step": {
      "description": "Movement per step [pixels] (circular shift amount)",
      "type": "integer",
      "example": "slide_pixels_per_step: 1"
    },
    "nonlinear_solver": {
      "description": "Nonlinear solver configuration for materials with field-dependent permeability μ(H)",
      "children": ["enabled", "solver_type", "max_iterations", "tolerance", "relaxation", "anderson_depth", "gmres_restart", "line_search_c", "line_search_alpha_init", "line_search_alpha_min", "line_search_rho", "line_search_max_trials", "line_search_adaptive", "verbose", "export_convergence"]
    },
    "solver_type": {
      "description": "Nonlinear solver algorithm: 'picard' (basic), 'anderson' (accelerated), 'newton-krylov' (recommended for fast convergence)",
      "values": ["picard", "anderson", "newton-krylov"],
      "example": "solver_type: newton-krylov",
      "validParents": ["nonlinear_solver"]
    },
    "max_iterations": {
      "description": "Maximum number of nonlinear iterations",
      "type": "integer",
      "example": "max_iterations: 50",
      "validParents": ["nonlinear_solver"]
    },
    "tolerance": {
      "description": "Convergence tolerance (relative residual norm)",
      "type": "number",
      "example": "tolerance: 1.0e-5",
      "validParents": ["nonlinear_solver"]
    },
    "relaxation": {
      "description": "Relaxation factor for Picard/Anderson methods (0.5 ~ 0.8, lower = more stable)",
      "type": "number",
      "example": "relaxation: 0.7",
      "validParents": ["nonlinear_solver"]
    },
    "anderson_depth": {
      "description": "Anderson acceleration depth (0 = disabled, typically 5-10)",
      "type": "integer",
      "example": "anderson_depth: 5",
      "validParents": ["nonlinear_solver"]
    },
    "gmres_restart": {
      "description": "GMRES restart parameter for Krylov subspace (Newton-Krylov only, typically 30)",
      "type": "integer",
      "example": "gmres_restart: 30",
      "validParents": ["nonlinear_solver"]
    },
    "line_search_c": {
      "description": "Armijo parameter for sufficient decrease condition (Newton-Krylov only, typically 1e-4)",
      "type": "number",
      "example": "line_search_c: 1.0e-4",
      "validParents": ["nonlinear_solver"]
    },
    "line_search_alpha_init": {
      "description": "Initial step length (Newton-Krylov only, 1.0 = full Newton step)",
      "type": "number",
      "example": "line_search_alpha_init: 1.0",
      "validParents": ["nonlinear_solver"]
    },
    "line_search_alpha_min": {
      "description": "Minimum step length safety bound (Newton-Krylov only)",
      "type": "number",
      "example": "line_search_alpha_min: 1.0e-4",
      "validParents": ["nonlinear_solver"]
    },
    "line_search_rho": {
      "description": "Backtracking factor (Newton-Krylov only, 0 < rho < 1, default 0.5, higher = more aggressive)",
      "type": "number",
      "example": "line_search_rho: 0.5",
      "validParents": ["nonlinear_solver"]
    },
    "line_search_max_trials": {
      "description": "Maximum number of backtracking trials (Newton-Krylov only)",
      "type": "integer",
      "example": "line_search_max_trials: 100",
      "validParents": ["nonlinear_solver"]
    },
    "line_search_adaptive": {
      "description": "Enable adaptive initial step length (Newton-Krylov only, recommended for better convergence)",
      "type": "boolean",
      "example": "line_search_adaptive: true",
      "validParents": ["nonlinear_solver"]
    },
    "verbose": {
      "description": "Print detailed solver iteration information (true/false)",
      "type": "boolean",
      "example": "verbose: false",
      "validParents": ["nonlinear_solver"]
    },
    "export_convergence": {
      "description": "Export convergence history to CSV file (true/false)",
      "type": "boolean",
      "example": "export_convergence: true",
      "validParents": ["nonlinear_solver"]
    }
  },
  "snippets": {
    "boundary_dirichlet": {
      "name": "Dirichlet Boundary (value=0)",
      "trigger": "type",
      "snippet": "type: dirichlet\nvalue: 0.0"
    },
    "boundary_neumann": {
      "name": "Neumann Boundary (value=0)",
      "trigger": "type",
      "snippet": "type: neumann\nvalue: 0.0"
    },
    "boundary_periodic": {
      "name": "Periodic Boundary",
      "trigger": "type",
      "snippet": "type: periodic\nvalue: 0.0"
    },
    "material_template": {
      "name": "Material Definition Template",
      "trigger": "material",
      "snippet": "rgb: [255, 255, 255]\nmu_r: 1.0\njz: 0.0\ncalc_force: false"
    },
    "transient_template": {
      "name": "Transient Analysis Template",
      "trigger": "transient",
      "snippet": "enabled: true\nenable_sliding: true\ntotal_steps: 1\nslide_direction: vertical\nslide_region_start: 0\nslide_region_end: 1\nslide_pixels_per_step: 1"
    },
    "nonlinear_picard": {
      "name": "Nonlinear Solver - Picard Method",
      "trigger": "nonlinear_solver",
      "snippet": "enabled: true\nsolver_type: picard\nmax_iterations: 50\ntolerance: 1.0e-5\nrelaxation: 0.7\nverbose: false\nexport_convergence: true"
    },
    "nonlinear_anderson": {
      "name": "Nonlinear Solver - Anderson Acceleration",
      "trigger": "nonlinear_solver",
      "snippet": "enabled: true\nsolver_type: anderson\nmax_iterations: 50\ntolerance: 1.0e-5\nrelaxation: 0.7\nanderson_depth: 5\nverbose: false\nexport_convergence: true"
    },
    "nonlinear_newton_krylov": {
      "name": "Nonlinear Solver - Newton-Krylov (Recommended)",
      "trigger": "nonlinear_solver",
      "snippet": "enabled: true\nsolver_type: newton-krylov\nmax_iterations: 50\ntolerance: 1.0e-5\ngmres_restart: 30\nline_search_c: 1.0e-4\nline_search_alpha_init: 1.0\nline_search_alpha_min: 1.0e-4\nline_search_rho: 0.5\nline_search_max_trials: 100\nline_search_adaptive: true\nverbose: false\nexport_convergence: true"
    }
  },
  "templates": {
    "polar_2d_motor": {
      "name": "Polar 2D Motor Analysis",
      "description": "Template for 2D motor analysis in polar coordinates",
      "content": "coordinate_system: polar\n\nmesh:\n  dx: 0.2e-3\n  dy: 0.2e-3\n\npolar_domain:\n  r_start: 0.222\n  r_end: 0.278\n  r_orientation: horizontal\n  theta_range: 1.0471975512  # π/3\n\npolar_boundary_conditions:\n  inner:\n    type: dirichlet\n    value: 0.0\n  outer:\n    type: dirichlet\n    value: 0.0\n\nmaterials:\n  air:\n    rgb: [255, 255, 255]\n    mu_r: 1.0\n    jz: 0.0\n\n  iron_stator:\n    rgb: [128, 128, 128]\n    mu_r: 100.0\n    jz: 0.0\n    calc_force: false\n\n  iron_rotor:\n    rgb: [100, 100, 100]\n    mu_r: 500.0\n    jz: 0.0\n    calc_force: true\n\ntransient:\n  enabled: true\n  enable_sliding: true\n  total_steps: 167\n  slide_direction: vertical\n  slide_region_start: 110\n  slide_region_end: 390\n"
    }
  }
}
